<section class='animated slideInUp' id='section' *ngIf='isLoaded'>
    <!--Grid row-->
  <div class="row">
      
    <div class="col-lg-2 col-md-3 col-sm-12 col-xs-12" id='left'>
        <div id='row'>
            <!-- Section heading -->
            <h4 class="h4-responsive gold-text">Author</h4>
          
                <!-- Grid column -->
                <div class="mb-lg-0 mb-5 text-center" id='user'>
                  <a routerLink="/user/{{user.login}}">
                    <div class="avatar mx-auto">
                        <img src="{{user.avatar}}" class="rounded-circle z-depth-1 img-fluid" >
                    </div>
                    <h5 class="font-weight-bold mt-2 mb-1">{{user.login}}</h5>
                    <p class="grey-text">{{user.name}}, {{user.location}}</p>
                    <p class="text-uppercase blue-text" id='raiting'>
                        <strong>★ {{user.raiting}}</strong>
                    </p>
                    </a>
                </div>
          </div>
      <div id = 'agenda' class='fixed'>
        <br/>
        <h4>Содержание</h4>
        <hr/>
            
        <div class="list-group" id='sideAgenda'>
          <div class='bottom-line'*ngIf='post.ingredients'>
              <a pageScroll href="#ingredients" class="list-group-item waves-light" mdbWavesEffect>Ингредиенты</a>
        </div>
        <div *ngFor='let step of steps' class='bottom-line'>
            <a pageScroll  href="#{{step.number}}" class="list-group-item waves-light" mdbWavesEffect>{{step.title}}</a>
        </div>
        <a pageScroll href="#comments" class="list-group-item waves-light" mdbWavesEffect>Комментарии</a>
          
          
          
        </div>
        <br/>
      </div>
    </div>
        
    <div class="col-lg-8 col-md-9 col-sm-12 col-xs-12" id='post'>
      <mdb-card cascade="true" wider="true" reverse="true" >
        <div class="view view-cascade overlay waves-light" mdbWavesEffect>
          <mdb-card-img src="{{post.picture}}" alt="Wide sample post image"></mdb-card-img>
          <a>
            <div class="mask rgba-white-slight"></div>
          </a>
        </div>
          
        <!--Post data-->
        <mdb-card-body cascade="true" class="text-center" id='title'>
          <h4>{{post.title}}</h4>
          <p>Written by <a routerLink="/user/{{user.login}}">{{user.login}}</a>, {{post.date}}</p>
          <div *ngIf="!(liked || !isLoggedIn || (currentUser == post.author) )">
            <div class="stars" (click)='updateStars(1)'>★</div>
            <div class="stars" (click)='updateStars(2)'>★</div>
            <div class="stars" (click)='updateStars(3)'>★</div>
            <div class="stars" (click)='updateStars(4)'>★</div>
            <div class="stars" (click)='updateStars(5)'>★</div>
          </div>
          <p id='postRaiting'>★ {{post.raiting}}</p>               
        </mdb-card-body>
          
        <!--Post data-->
      </mdb-card>
          
      <!--Excerpt-->
      <div class="excerpt mt-5">   
        <h5>Описание</h5>
        <hr/>
        <p>{{post.fullDescription}}</p>

        <br/>
        <h5>Содержание</h5>
        <hr/>
            
        <div class="list-group">
          <a pageScroll href="#ingredients" class="list-group-item waves-light" *ngIf='post.ingredients' mdbWavesEffect>Ингредиенты</a>
          <a pageScroll *ngFor='let step of steps'  href="#{{step.number}}" class="list-group-item waves-light" mdbWavesEffect>{{step.title}}</a>
          <a pageScroll href="#comments" class="list-group-item waves-light" mdbWavesEffect>Комментарии</a>
        </div>
                
        <br/>
        <div *ngIf='post.ingredients'>
            <h5 id='ingredients'>Ингредиенты</h5>
            <hr/>
    
            <p>{{post.ingredients}}</p>
        </div>
        
                
        <br/>
        <h5 id='ingredients'>Инструкция</h5>
        <hr/>      
        <mat-vertical-stepper #stepper></mat-vertical-stepper>
           
        <div *ngFor='let step of steps' id='{{step.number}}' (click)="toggle($event)"> 
          <mat-expansion-panel id='panel'>
              <mat-expansion-panel-header>
                <mat-panel-title>
                    <div ng-reflect-ng-switch="number" class="mat-step-icon" id='circle'>
                        <span class="ng-star-inserted">{{step.number}}</span>
                    </div>   
                </mat-panel-title>
                <mat-panel-description>
                    <h5 id='step_{{step.number}}'>{{step.title}}</h5>
                </mat-panel-description>
              </mat-expansion-panel-header>  

            </mat-expansion-panel>
          
            <div class="mat-vertical-content-container mat-stepper-vertical-line">
                <div class="mat-vertical-stepper-content ">
                  <div class="mat-vertical-content">
                    <div class="ng-star-inserted">
                    <p> {{step.text}}</p>
                    <br/>
                    <p class="text-center">
                      <img id="step_img" class='img-fluid view view-cascade overlay' src="{{step.picture}}"></p>
                      <br/>
                      </div>
                    </div>
                  </div>
            </div>
          </div>

              <div id='comments' (click)="toggle('comments_block')"> 
                  <mat-expansion-panel>
                      <mat-expansion-panel-header>
                        <mat-panel-title>
                            <div ng-reflect-ng-switch="number" class="mat-step-icon" id='circle'>
                                <span class="ng-star-inserted"><i class="fa fa-comment-o prefix white-text" aria-hidden="true"></i></span>
                            </div>   
                        </mat-panel-title>
                        <mat-panel-description>
                            <h5 id='step_3'>Комментарии</h5>
                        </mat-panel-description>
                      </mat-expansion-panel-header>
                      
                      <div id="comments_block" class="mat-vertical-content-container">
                          <div class="mat-vertical-stepper-content ">
                            <div class="mat-vertical-content">
                              <div class="ng-star-inserted">

                                  <hr/>
                                  <p *ngIf='!isLoggedIn'>You should sign in or sign up to read comments.</p>
                                  <app-comments-group [(postId)]="postId" *ngIf='isLoggedIn'></app-comments-group>

                        
  
                                </div>
                              </div>
                            </div>
                      </div>
                    
        
                    </mat-expansion-panel>
                  
                    
                  </div>
          
          
      </div>
    </div>
        
    <div class="col-lg-2 col-md-1 col-sm-12 col-xs-1" id='top-users'>
        <app-top-users></app-top-users>
    </div>
        <!--Featured image-->

        
  </div>
    <!--Grid row-->
  <hr/>
  
  
  </section>
  <div class='text-center' id='spinner' *ngIf='!isLoaded'>
          <p-progressSpinner fill="white"></p-progressSpinner>
  </div>


 